<mujoco model="panda_mocap">
  <include file="panda.xml"/>

  <worldbody>
    <!-- Mocap body as IK target (end-effector follows this) -->
    <body name="target" mocap="true" pos="0.5 0 0.5">
      <!-- Visual indicator: RGB axes -->
      <geom type="sphere" size="0.02" rgba="1 0.5 0 0.7" contype="0" conaffinity="0"/>
      <geom type="box" size="0.05 0.005 0.005" pos="0.05 0 0" rgba="1 0 0 0.7" contype="0" conaffinity="0"/>
      <geom type="box" size="0.005 0.05 0.005" pos="0 0.05 0" rgba="0 1 0 0.7" contype="0" conaffinity="0"/>
      <geom type="box" size="0.005 0.005 0.05" pos="0 0 0.05" rgba="0 0 1 0.7" contype="0" conaffinity="0"/>
    </body>
  </worldbody>

  <!-- Weld constraint: end-effector follows mocap body -->
  <!-- relpose: offset from hand origin to fingertip (0, 0, 0.103) in hand frame -->
  <equality>
    <weld body1="hand" body2="target" relpose="0 0 0.103 1 0 0 0" solref="0.01 1" solimp="0.9 0.95 0.001"/>
  </equality>
</mujoco>
