<mujoco model="xlerobot">
  <!-- <option timestep="0.002" noslip_iterations="3">
    <flag multiccd="enable"/>
  </option> -->

  <compiler angle="radian" meshdir="./meshes/"/>

  <asset>
    <material name="white" rgba="0.3 0.3 0.3 1" specular="0.1" shininess="0.1"/>
    <material name="grey" rgba="0.6 0.6 0.6 1" specular="0.1" shininess="0.1"/>
    <material name="blue" rgba="0.2 0.3 0.6 1" specular="0.1" shininess="0.1"/>
    <material name="motor" rgba="0.02 0.02 0.02 1" specular="0.1" shininess="0.1"/>

    <!-- Arm meshes -->
    <mesh name="Base" file="Base.stl"/>
    <mesh name="Base_Motor" file="Base_Motor.stl"/>
    <mesh name="Rotation_Pitch" file="Rotation_Pitch.stl"/>
    <mesh name="Rotation_Pitch_Motor" file="Rotation_Pitch_Motor.stl"/>
    <mesh name="Upper_Arm" file="Upper_Arm.stl"/>
    <mesh name="Upper_Arm_Motor" file="Upper_Arm_Motor.stl"/>
    <mesh name="Lower_Arm" file="Lower_Arm.stl"/>
    <mesh name="Lower_Arm_Motor" file="Lower_Arm_Motor.stl"/>
    <mesh name="Wrist_Pitch_Roll" file="Wrist_Pitch_Roll.stl"/>
    <mesh name="Wrist_Pitch_Roll_Motor" file="Wrist_Pitch_Roll_Motor.stl"/>
    <mesh name="Fixed_Jaw" file="Fixed_Jaw.stl"/>
    <mesh name="Fixed_Jaw_Motor" file="Fixed_Jaw_Motor.stl"/>
    <mesh name="Fixed_Jaw_part1" file="Fixed_Jaw_part1.ply.convex.stl"/>
    <mesh name="Fixed_Jaw_part2" file="Fixed_Jaw_part2.ply.convex.stl"/>
    <mesh name="Moving_Jaw" file="Moving_Jaw.stl"/>
    <mesh name="Moving_Jaw_part1" file="Moving_Jaw_part1.ply.convex.stl"/>
    <mesh name="Moving_Jaw_part2" file="Moving_Jaw_part2.ply.convex.stl"/>
    <mesh name="Moving_Jaw_part3" file="Moving_Jaw_part3.ply.convex.stl"/>
    
    <!-- Camera meshes -->
    <mesh name="XLeRobot_camera1" file="XLeRobot_camera1.stl" scale="0.001 0.001 0.001"/>
    <mesh name="XLeRobot_camera2" file="XLeRobot_camera2.stl" scale="0.001 0.001 0.001"/>
    
    <!-- Base and head meshes -->
    <mesh name="raskogbody" file="raskogbody.stl" scale="0.0009 0.001 0.0009"/>
    <mesh name="raskogwheel1" file="raskogwheel1.stl" scale="0.0009 0.001 0.0009"/>
    <mesh name="raskogwheel2" file="raskogwheel2.stl" scale="0.0009 0.001 0.0009"/>
    <mesh name="topbase1" file="topbase1.stl" scale="0.001 0.001 0.001"/>
    <mesh name="topbase2" file="topbase2.stl" scale="0.001 0.001 0.001"/>
    <mesh name="tophead3" file="tophead3.stl" scale="0.001 0.001 0.001"/>
    <mesh name="tophead4" file="tophead4.stl" scale="0.001 0.001 0.001"/>
    <mesh name="tophead5" file="tophead5.stl" scale="0.001 0.001 0.001"/>
    <mesh name="tophead6" file="tophead6.stl" scale="0.001 0.001 0.001"/>
  </asset>

  <default>
    <!-- Default: all geoms don't participate in collision -->
    <geom contype="0" conaffinity="0" condim="1" solref="0.005 1"/>
    <!-- Wheel defaults (similar to car) -->
    <default class="wheel">
      <joint damping="0.03" actuatorfrcrange="-2.0 2.0"/>
      <geom type="cylinder" group="3" size="0.05 0.02" rgba="0.5 0.5 1 1" contype="1" conaffinity="1" condim="6" friction="1.5 0.02 0.003"/>
    </default>
    <default class="caster">
      <geom type="sphere" group="3" size="0.02" rgba="0.7 0.7 0.7 1" contype="1" conaffinity="1" condim="1" priority="1"/>
    </default>
    <!-- STS3215 motor properties (from SO101) -->
    <default class="sts3215">
      <geom contype="0" conaffinity="0"/>
      <joint damping="0.60" frictionloss="0.052" armature="0.028"/>
      <position kp="998.22" kv="2.731" forcerange="-2.94 2.94"/>
    </default>
    <default class="visual">
      <geom type="mesh" contype="0" conaffinity="0" density="0" group="2"/>
    </default>
    <default class="collision">
      <geom contype="1" conaffinity="1" group="3" type="mesh"
            condim="4" solref="0.002 1.0" solimp="0.95 0.99 0.001"/>
    </default>
  </default>

  <worldbody>
    <light directional="true" pos="-0.5 0.5 3" dir="0 0 -1"/>
    
    <!-- Chassis with freejoint (similar to car) - not fixed to ground -->
    <body name="chassis" pos="0 0 0.38">
      <freejoint/>
      
      <!-- Simplified base_link visual representation -->
      <!-- <geom type="box" size="0.2 0.2 0.38" pos="0 0 0.35" rgba="0.2 0.2 0.6 0.3" class="visual"/>
      <geom type="box" size="0.1575 0.2025 0.045" pos="0 0 0.73" rgba="0.6 0.5 0.1 0.5" class="visual"/> -->
      <!-- Collision geoms for base_link (URDF positions are relative to base_link origin at z=0, chassis is at z=0.38, so subtract 0.38) -->
      <geom type="box" size="0.19565 0.2295 0.05" pos="0 0 -0.3" class="collision" friction="1 0.005 0.0001" rgba="0.3 0.3 0.9 0.4"/>
      <geom type="box" size="0.1575 0.2025 0.295" pos="0 0 0.015" class="collision" friction="1 0.005 0.0001" rgba="0.9 0.3 0.3 0.4"/>
      <geom type="box" size="0.045 0.018 0.34" pos="0 -0.216 0.06" class="collision" friction="1 0.005 0.0001" rgba="0.3 0.9 0.3 0.4"/>
      <geom type="box" size="0.045 0.018 0.34" pos="0 0.216 0.06" class="collision" friction="1 0.005 0.0001" rgba="0.9 0.9 0.3 0.4"/>
      
      <!-- Base link inertial properties (mass set to 0, mass moved to wheels) -->
      <inertial pos="0 0 -0.38" mass="10" diaginertia="0.001 0.001 0.001"/>
      
      <!-- Raskog visual meshes -->
      <geom type="mesh" mesh="raskogbody" pos="-0.01668 0.502 0.515" euler="1.5708 0 0" material="blue" class="visual"/>
      <geom type="mesh" mesh="raskogwheel1" pos="-0.01668 0.502 0.515" euler="1.5708 0 0" material="grey" class="visual"/>
      <geom type="mesh" mesh="raskogwheel2" pos="-0.01668 0.502 0.515" euler="1.5708 0 0" material="motor" class="visual"/>
      
      <!-- Drive wheels (active wheels, similar to car) -->
      <!-- Positioned at the bottom of chassis, with wheels touching the ground -->
      <body name="left_wheel" pos="-0.15 0.225 -0.32" zaxis="0 1 0">
        <joint name="left_wheel_joint"/>
        <inertial pos="0 0 0" mass="1" diaginertia="0.01 0.01 0.01"/>
        <geom class="wheel"/>
      </body>
      <body name="right_wheel" pos="-0.15 -0.225 -0.32" zaxis="0 1 0">
        <joint name="right_wheel_joint"/>
        <inertial pos="0 0 0" mass="1" diaginertia="0.01 0.01 0.01"/>
        <geom class="wheel"/>
      </body>
      
      <!-- Caster wheels (passive wheels, similar to car's front wheel) -->
      <!-- Positioned at the bottom of chassis, touching the ground -->
      <!-- Note: caster wheels are geoms (not bodies) with zero friction for free rolling -->
      <!-- Use condim="1" and priority="1" to match car.xml's front wheel and avoid friction -->
      <geom name="front_caster" pos="0.15 -0.225 -0.35" type="sphere" size="0.02" rgba="0.7 0.7 0.7 1" contype="1" conaffinity="1" condim="1" priority="1" group="3"/>
      <geom name="back_caster" pos="0.15 0.225 -0.35" type="sphere" size="0.02" rgba="0.7 0.7 0.7 1" contype="1" conaffinity="1" condim="1" priority="1" group="3"/>

      <!-- First Arm -->
      <body name="Base" pos="-0.135 -0.133 0.38" euler="0 0 1.5708">
        <inertial pos="0.0137179 -5.19711e-05 0.0334843" mass="0.147" fullinertia="0.000114686 0.000136117 0.000130364 -4.59787e-07 4.97151e-06 9.75275e-08"/>
        <!-- Visual meshes -->
        <geom type="mesh" mesh="Base" material="white" class="visual"/>
        <geom type="mesh" mesh="Base_Motor" material="motor" class="visual"/>
        <!-- Collision meshes -->
        <geom type="mesh" mesh="Base" class="collision"/>
        <geom type="mesh" mesh="Base_Motor" class="collision"/>
        
        <body name="Rotation_Pitch" pos="0 -0.0452 0.0165" euler="1.5708 0 0">
          <inertial pos="-0.0307604 -1.66727e-05 -0.0252713" mass="0.100006" fullinertia="8.3759e-05 8.10403e-05 2.39783e-05 7.55525e-08 -1.16342e-06 1.54663e-07"/>
          <joint name="Rotation_L" type="hinge" axis="0 -1 0" range="-2.16 2.16" class="sts3215"/>
          <!-- Visual meshes -->
          <geom type="mesh" mesh="Rotation_Pitch" material="white" class="visual"/>
          <geom type="mesh" mesh="Rotation_Pitch_Motor" material="motor" class="visual"/>
          <!-- Collision meshes -->
          <geom type="mesh" mesh="Rotation_Pitch" class="collision"/>
          <geom type="mesh" mesh="Rotation_Pitch_Motor" class="collision"/>
          
          <body name="Upper_Arm" pos="0 0.1025 0.0306" euler="1.5708 0 0">
            <inertial pos="-0.0898471 -0.00838224 0.0184089" mass="0.103" fullinertia="4.08002e-05 0.000147318 0.000142487 -1.97819e-05 -4.03016e-08 8.97326e-09"/>
            <joint name="Pitch_L" type="hinge" axis="-1 0 0" range="-0.22 3.37" class="sts3215"/>
            <!-- Visual meshes -->
            <geom type="mesh" mesh="Upper_Arm" material="white" class="visual"/>
            <geom type="mesh" mesh="Upper_Arm_Motor" material="motor" class="visual"/>
            <!-- Collision meshes -->
            <geom type="mesh" mesh="Upper_Arm" class="collision"/>
            <geom type="mesh" mesh="Upper_Arm_Motor" class="collision"/>
            
            <body name="Lower_Arm" pos="0 0.11257 0.028" euler="-1.5708 0 0">
              <inertial pos="-0.0980701 0.00324376 0.0182831" mass="0.104" fullinertia="2.87438e-05 0.000159844 0.00014529 7.41152e-06 1.26409e-06 -4.90188e-08"/>
              <joint name="Elbow_L" type="hinge" axis="1 0 0" range="-0.22 3.14" class="sts3215"/>
              <!-- Visual meshes -->
              <geom type="mesh" mesh="Lower_Arm" material="white" class="visual"/>
              <geom type="mesh" mesh="Lower_Arm_Motor" material="motor" class="visual"/>
              <!-- Collision meshes -->
              <geom type="mesh" mesh="Lower_Arm" class="collision"/>
              <geom type="mesh" mesh="Lower_Arm_Motor" class="collision"/>
              
              <body name="Wrist_Pitch_Roll" pos="0 0.0052 0.1349" euler="-1.5708 0 0">
                <inertial pos="-0.000103312 -0.0386143 0.0281156" mass="0.079" fullinertia="3.68263e-05 2.5391e-05 2.1e-05 1.7893e-08 -5.28128e-08 3.6412e-06"/>
                <joint name="Wrist_Pitch_L" type="hinge" axis="1 0 0" range="-1.6580628494556928 1.6580627293335335" class="sts3215"/>
                <!-- Visual meshes -->
                <geom type="mesh" mesh="Wrist_Pitch_Roll" material="white" class="visual"/>
                <geom type="mesh" mesh="Wrist_Pitch_Roll_Motor" material="motor" class="visual"/>
                <!-- Collision meshes -->
                <geom type="mesh" mesh="Wrist_Pitch_Roll" class="collision"/>
                <geom type="mesh" mesh="Wrist_Pitch_Roll_Motor" class="collision"/>
                
                <body name="Fixed_Jaw" pos="0 -0.0601 0" euler="0 1.5708 0">
                  <inertial pos="0.000213627 0.000245138 -0.025187" mass="0.087" fullinertia="2.75087e-05 4.33657e-05 3.45059e-05 -3.35241e-07 -5.7352e-06 -5.17847e-08"/>
                  <joint name="Wrist_Roll_L" type="hinge" axis="0 -1 0" range="-2.7438472969992493 2.841206309382605" class="sts3215"/>
                  <!-- Visual meshes -->
                  <geom type="mesh" mesh="Fixed_Jaw" material="white" class="visual"/>
                  <geom type="mesh" mesh="Fixed_Jaw_Motor" material="motor" class="visual"/>
                  <!-- Collision meshes (using convex parts from URDF) with high friction for gripping -->
                  <geom type="mesh" mesh="Fixed_Jaw_part1" class="collision" friction="2 0.1 0.01" condim="4"/>
                  <geom type="mesh" mesh="Fixed_Jaw_part2" class="collision" friction="2 0.1 0.01" condim="4"/>

                  <body name="Moving_Jaw" pos="-0.0202 -0.0244 0" euler="3.1416 0 3.33">
                    <inertial pos="-0.00157495 -0.0300244 0.0192755" mass="0.012" fullinertia="6.61427e-06 1.89032e-06 5.28738e-06 -3.19807e-07 -5.90717e-09 -1.09945e-07"/>
                    <joint name="Jaw_L" type="hinge" axis="0 0 1" range="-0.37453297762778586 1.7453291995659765" class="sts3215"/>
                    <!-- Visual mesh -->
                    <geom type="mesh" mesh="Moving_Jaw" material="white" class="visual"/>
                    <!-- Collision meshes (using convex parts from URDF) with high friction for gripping -->
                    <geom type="mesh" mesh="Moving_Jaw_part1" class="collision" friction="2 0.1 0.01" condim="4"/>
                    <geom type="mesh" mesh="Moving_Jaw_part2" class="collision" friction="2 0.1 0.01" condim="4"/>
                    <geom type="mesh" mesh="Moving_Jaw_part3" class="collision" friction="2 0.1 0.01" condim="4"/>
                  </body>

                  <!-- Camera on first arm -->
                  <body name="Right_Arm_Camera" pos="0 -0.022 0.05" euler="1.5708 -1.5708 0">
                    <geom type="mesh" mesh="XLeRobot_camera1" pos="-0.015 -0.026 0" material="white" class="visual"/>
                    <geom type="mesh" mesh="XLeRobot_camera2" pos="-0.015 -0.026 0" material="motor" class="visual"/>
                  </body>
                </body>
              </body>
            </body>
          </body>
        </body>
      </body>

      <!-- Second Arm -->
      <body name="Base_2" pos="-0.135 0.133 0.38" euler="0 0 1.5708">
        <inertial pos="0.0137179 -5.19711e-05 0.0334843" mass="0.147" fullinertia="0.000114686 0.000136117 0.000130364 -4.59787e-07 4.97151e-06 9.75275e-08"/>
        <!-- Visual meshes -->
        <geom type="mesh" mesh="Base" material="white" class="visual"/>
        <geom type="mesh" mesh="Base_Motor" material="motor" class="visual"/>
        <!-- Collision meshes -->
        <geom type="mesh" mesh="Base" class="collision"/>
        <geom type="mesh" mesh="Base_Motor" class="collision"/>
        
        <body name="Rotation_Pitch_2" pos="0 -0.0452 0.0165" euler="1.5708 0 0">
          <inertial pos="-0.0307604 -1.66727e-05 -0.0252713" mass="0.100006" fullinertia="8.3759e-05 8.10403e-05 2.39783e-05 7.55525e-08 -1.16342e-06 1.54663e-07"/>
          <joint name="Rotation_R" type="hinge" axis="0 -1 0" range="-2.16 2.16" class="sts3215"/>
          <!-- Visual meshes -->
          <geom type="mesh" mesh="Rotation_Pitch" material="white" class="visual"/>
          <geom type="mesh" mesh="Rotation_Pitch_Motor" material="motor" class="visual"/>
          <!-- Collision meshes -->
          <geom type="mesh" mesh="Rotation_Pitch" class="collision"/>
          <geom type="mesh" mesh="Rotation_Pitch_Motor" class="collision"/>
          
          <body name="Upper_Arm_2" pos="0 0.1025 0.0306" euler="1.5708 0 0">
            <inertial pos="-0.0898471 -0.00838224 0.0184089" mass="0.103" fullinertia="4.08002e-05 0.000147318 0.000142487 -1.97819e-05 -4.03016e-08 8.97326e-09"/>
            <joint name="Pitch_R" type="hinge" axis="-1 0 0" range="-0.22 3.37" class="sts3215"/>
            <!-- Visual meshes -->
            <geom type="mesh" mesh="Upper_Arm" material="white" class="visual"/>
            <geom type="mesh" mesh="Upper_Arm_Motor" material="motor" class="visual"/>
            <!-- Collision meshes -->
            <geom type="mesh" mesh="Upper_Arm" class="collision"/>
            <geom type="mesh" mesh="Upper_Arm_Motor" class="collision"/>
            
            <body name="Lower_Arm_2" pos="0 0.11257 0.028" euler="-1.5708 0 0">
              <inertial pos="-0.0980701 0.00324376 0.0182831" mass="0.104" fullinertia="2.87438e-05 0.000159844 0.00014529 7.41152e-06 1.26409e-06 -4.90188e-08"/>
              <joint name="Elbow_R" type="hinge" axis="1 0 0" range="-0.22 3.14" class="sts3215"/>
              <!-- Visual meshes -->
              <geom type="mesh" mesh="Lower_Arm" material="white" class="visual"/>
              <geom type="mesh" mesh="Lower_Arm_Motor" material="motor" class="visual"/>
              <!-- Collision meshes -->
              <geom type="mesh" mesh="Lower_Arm" class="collision"/>
              <geom type="mesh" mesh="Lower_Arm_Motor" class="collision"/>
              
              <body name="Wrist_Pitch_Roll_2" pos="0 0.0052 0.1349" euler="-1.5708 0 0">
                <inertial pos="-0.000103312 -0.0386143 0.0281156" mass="0.079" fullinertia="3.68263e-05 2.5391e-05 2.1e-05 1.7893e-08 -5.28128e-08 3.6412e-06"/>
                <joint name="Wrist_Pitch_R" type="hinge" axis="1 0 0" range="-1.6580628494556928 1.6580627293335335" class="sts3215"/>
                <!-- Visual meshes -->
                <geom type="mesh" mesh="Wrist_Pitch_Roll" material="white" class="visual"/>
                <geom type="mesh" mesh="Wrist_Pitch_Roll_Motor" material="motor" class="visual"/>
                <!-- Collision meshes -->
                <geom type="mesh" mesh="Wrist_Pitch_Roll" class="collision"/>
                <geom type="mesh" mesh="Wrist_Pitch_Roll_Motor" class="collision"/>
                
                <body name="Fixed_Jaw_2" pos="0 -0.0601 0" euler="0 1.5708 0">
                  <inertial pos="0.000213627 0.000245138 -0.025187" mass="0.087" fullinertia="2.75087e-05 4.33657e-05 3.45059e-05 -3.35241e-07 -5.7352e-06 -5.17847e-08"/>
                  <joint name="Wrist_Roll_R" type="hinge" axis="0 -1 0" range="-2.7438472969992493 2.841206309382605" class="sts3215"/>
                  <!-- Visual meshes -->
                  <geom type="mesh" mesh="Fixed_Jaw" material="white" class="visual"/>
                  <geom type="mesh" mesh="Fixed_Jaw_Motor" material="motor" class="visual"/>
                  <!-- Collision meshes (using convex parts from URDF) with high friction for gripping -->
                  <geom type="mesh" mesh="Fixed_Jaw_part1" class="collision" friction="2 0.1 0.01" condim="4"/>
                  <geom type="mesh" mesh="Fixed_Jaw_part2" class="collision" friction="2 0.1 0.01" condim="4"/>

                  <body name="Moving_Jaw_2" pos="-0.0202 -0.0244 0" euler="3.1416 0 3.33">
                    <inertial pos="-0.00157495 -0.0300244 0.0192755" mass="0.012" fullinertia="6.61427e-06 1.89032e-06 5.28738e-06 -3.19807e-07 -5.90717e-09 -1.09945e-07"/>
                    <joint name="Jaw_R" type="hinge" axis="0 0 1" range="-0.37453297762778586 1.7453291995659765" class="sts3215"/>
                    <!-- Visual mesh -->
                    <geom type="mesh" mesh="Moving_Jaw" material="white" class="visual"/>
                    <!-- Collision meshes (using convex parts from URDF) with high friction for gripping -->
                    <geom type="mesh" mesh="Moving_Jaw_part1" class="collision" friction="2 0.1 0.01" condim="4"/>
                    <geom type="mesh" mesh="Moving_Jaw_part2" class="collision" friction="2 0.1 0.01" condim="4"/>
                    <geom type="mesh" mesh="Moving_Jaw_part3" class="collision" friction="2 0.1 0.01" condim="4"/>
                  </body>

                  <!-- Camera on second arm -->
                  <body name="Left_Arm_Camera" pos="0 -0.021 0.05" euler="1.5708 -1.5708 0">
                    <geom type="mesh" mesh="XLeRobot_camera1" pos="-0.015 -0.026 0" material="white" class="visual"/>
                    <geom type="mesh" mesh="XLeRobot_camera2" pos="-0.015 -0.026 0" material="motor" class="visual"/>
                  </body>
                </body>
              </body>
            </body>
          </body>
        </body>
      </body>

      <!-- Top base (URDF: top_base_joint origin is xyz="0 0 0.73" relative to base_link at z=0, chassis is at z=0.38, so pos should be 0.73-0.38=0.35) -->
      <body name="top_base_link" pos="0 0 0.35">
        <inertial pos="0 0 0" mass="0.2542" diaginertia="0.0045 0.005 0.0045"/>
        <!-- Visual meshes -->
        <geom type="mesh" mesh="topbase1" pos="0.016 -0.006 -0.727" material="white" class="visual"/>
        <geom type="mesh" mesh="topbase2" pos="0.016 -0.006 -0.727" material="motor" class="visual"/>
        
        <!-- Head -->
        <body name="head_pan_link" pos="-0.178 0 0">
          <inertial pos="0 0 0" mass="0.2556" diaginertia="0.0129 0.0095 0.0184"/>
          <joint name="head_pan_joint" type="hinge" axis="0 0 1" range="-1.57 1.57" class="sts3215"/>
          <!-- Visual meshes -->
          <geom type="mesh" mesh="tophead3" pos="0.194 -0.006 -0.73" material="white" class="visual"/>
          <geom type="mesh" mesh="tophead4" pos="0.194 -0.006 -0.73" material="motor" class="visual"/>
          
          <body name="head_tilt_link" pos="0.031 0 0.43815">
            <inertial pos="0 0 0" mass="0.02087" diaginertia="0.0061 0.0014 0.0061"/>
            <joint name="head_tilt_joint" type="hinge" axis="0 1 0" range="-0.76 1.45" class="sts3215"/>
            <!-- Visual meshes -->
            <geom type="mesh" mesh="tophead5" pos="0.16265 -0.006 -1.16815" material="white" class="visual"/>
            <geom type="mesh" mesh="tophead6" pos="0.16265 -0.006 -1.16815" material="motor" class="visual"/>
            
            <!-- Camera frames -->
            <body name="head_camera_link" pos="0.025 0 0.03">
              <body name="head_camera_rgb_frame" pos="0 -0.00 0" euler="-1.5708 0 -1.5708">
                <site name="head_camera_rgb_optical_frame" type="box" size="0.01 0.01 0.01" rgba="1 0 0 0.3"/>
              </body>
              <body name="head_camera_depth_frame" pos="0 0.00 0" euler="-1.5708 0 -1.5708">
                <site name="head_camera_depth_optical_frame" type="box" size="0.01 0.01 0.01" rgba="0 1 0 0.0"/>
              </body>
            </body>
          </body>
        </body>
      </body>
    </body>
  </worldbody>

  <contact>
    <!-- Exclude collisions between adjacent links (as specified in SRDF) -->
    <!-- First arm adjacent collisions -->
    <exclude body1="Base" body2="Rotation_Pitch"/>
    <exclude body1="Rotation_Pitch" body2="Upper_Arm"/>
    <exclude body1="Upper_Arm" body2="Lower_Arm"/>
    <exclude body1="Lower_Arm" body2="Wrist_Pitch_Roll"/>
    <exclude body1="Wrist_Pitch_Roll" body2="Fixed_Jaw"/>
    <exclude body1="Moving_Jaw" body2="Fixed_Jaw"/>
    <!-- First arm impossible collisions due to kinematic constraints -->
    <exclude body1="Rotation_Pitch" body2="Lower_Arm"/>
    <exclude body1="Rotation_Pitch" body2="Wrist_Pitch_Roll"/>
    <exclude body1="Upper_Arm" body2="Wrist_Pitch_Roll"/>
    <exclude body1="Upper_Arm" body2="Base"/>
    <exclude body1="Moving_Jaw" body2="Wrist_Pitch_Roll"/>
    
    <!-- Second arm adjacent collisions -->
    <exclude body1="Base_2" body2="Rotation_Pitch_2"/>
    <exclude body1="Rotation_Pitch_2" body2="Upper_Arm_2"/>
    <exclude body1="Upper_Arm_2" body2="Lower_Arm_2"/>
    <exclude body1="Lower_Arm_2" body2="Wrist_Pitch_Roll_2"/>
    <exclude body1="Wrist_Pitch_Roll_2" body2="Fixed_Jaw_2"/>
    <exclude body1="Moving_Jaw_2" body2="Fixed_Jaw_2"/>
    <!-- Second arm impossible collisions due to kinematic constraints -->
    <exclude body1="Rotation_Pitch_2" body2="Lower_Arm_2"/>
    <exclude body1="Rotation_Pitch_2" body2="Wrist_Pitch_Roll_2"/>
    <exclude body1="Upper_Arm_2" body2="Wrist_Pitch_Roll_2"/>
    <exclude body1="Upper_Arm_2" body2="Base_2"/>
    <exclude body1="Moving_Jaw_2" body2="Wrist_Pitch_Roll_2"/>
    
    <!-- Disable collisions between the two arms -->
    <exclude body1="Base" body2="Base_2"/>
    <exclude body1="chassis" body2="Base_2"/>
  </contact>

  <tendon>
    <!-- Forward/backward movement: left and right wheels rotate together -->
    <fixed name="forward">
      <joint joint="left_wheel_joint" coef="0.5"/>
      <joint joint="right_wheel_joint" coef="0.5"/>
    </fixed>
    <!-- Turning: left and right wheels rotate in opposite directions -->
    <fixed name="turn">
      <joint joint="left_wheel_joint" coef="-0.5"/>
      <joint joint="right_wheel_joint" coef="0.5"/>
    </fixed>
  </tendon>

  <actuator>
    <!-- Chassis actuators (car-like control using wheels) -->
    <motor name="forward" tendon="forward" ctrlrange="-1 1"/>
    <motor name="turn" tendon="turn" ctrlrange="-1 1"/>

    <!-- First arm actuators (SO101 STS3215 parameters with SO101 joint ranges) -->
    <position class="sts3215" name="Rotation_L" joint="Rotation_L" forcerange="-3.35 3.35" ctrlrange="-2.16 2.16"/>
    <position class="sts3215" name="Pitch_L" joint="Pitch_L" forcerange="-3.35 3.35" ctrlrange="-0.22 3.37"/>
    <position class="sts3215" name="Elbow_L" joint="Elbow_L" forcerange="-3.35 3.35" ctrlrange="-0.22 3.14"/>
    <position class="sts3215" name="Wrist_Pitch_L" joint="Wrist_Pitch_L" forcerange="-3.35 3.35" ctrlrange="-1.65806 1.65806"/>
    <position class="sts3215" name="Wrist_Roll_L" joint="Wrist_Roll_L" forcerange="-3.35 3.35" ctrlrange="-2.74385 2.84121"/>
    <position class="sts3215" name="Jaw_L" joint="Jaw_L" forcerange="-3.35 3.35" ctrlrange="-0.37453 1.74533"/>

    <!-- Second arm actuators (SO101 STS3215 parameters with SO101 joint ranges) -->
    <position class="sts3215" name="Rotation_R" joint="Rotation_R" forcerange="-3.35 3.35" ctrlrange="-2.16 2.16"/>
    <position class="sts3215" name="Pitch_R" joint="Pitch_R" forcerange="-3.35 3.35" ctrlrange="-0.22 3.37"/>
    <position class="sts3215" name="Elbow_R" joint="Elbow_R" forcerange="-3.35 3.35" ctrlrange="-0.22 3.14"/>
    <position class="sts3215" name="Wrist_Pitch_R" joint="Wrist_Pitch_R" forcerange="-3.35 3.35" ctrlrange="-1.65806 1.65806"/>
    <position class="sts3215" name="Wrist_Roll_R" joint="Wrist_Roll_R" forcerange="-3.35 3.35" ctrlrange="-2.74385 2.84121"/>
    <position class="sts3215" name="Jaw_R" joint="Jaw_R" forcerange="-3.35 3.35" ctrlrange="-0.37453 1.74533"/>

    <!-- Head actuators (SO101 STS3215 parameters) -->
    <position class="sts3215" name="head_pan" joint="head_pan_joint" ctrlrange="-1.57 1.57"/>
    <position class="sts3215" name="head_tilt" joint="head_tilt_joint" ctrlrange="-0.76 1.45"/>
  </actuator>
</mujoco>

